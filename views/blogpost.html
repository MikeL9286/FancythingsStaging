<script>
    Blogger.posts = Blogger.GetPostById(window.location.href.match('post=(.*)')[1]);
    Blogger.GetRelatedPosts();
</script>

<section id="postContainer" class="container">
    <div class="post col-xs-12 col-sm-10 col-sm-offset-1 col-md-6 col-md-offset-1">
        <script id="blog-post-template" type="text/x-handlebars-template">
            {{#blogPosts}}
            <div class="post-header">
                <h3>{{title}}</h3>
                <em>{{formattedDate published}}</em>
                <div>
                    <a href="{{twitterShareLink}}"><i class="fa fa-twitter"></i></a>
                    <a href="{{pinterestShareLink}}"><i class="fa fa-pinterest"></i></a>
                    <a href="{{{emailShareLink}}}"><i class="fa fa-envelope"></i></a>
                </div>
            </div>
            <div class="post-content">
                {{{content}}}
            </div>
            <div class="post-footer">
                <h3>-K$</h3>
                <ul class="nav nav-pills">
                    {{#each labels}}
                    <li><a href="#">{{this}}</a></li>
                    {{/each}}
                </ul>
            </div>
            <div class="post-comments">
                <div id="disqus_thread"></div>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
            {{/blogPosts}}
        </script>
    </div>
    <div class="related-posts hidden-xs col-md-4 col-md-offset-1">
        <script id="related-posts-template" type="text/x-handlebars-template">
            {{#relatedPosts}}
            <div class="item">
                <a href="blogpost.html?post={{{id}}}">
                    <img class="image rounded" src="{{{thumbnail content}}}" alt="post thumbnail">
                </a>
                <a href="blogpost.html?post={{{id}}}"><h4>{{title}}</h4></a>
            </div>
            {{/relatedPosts}}
        </script>
    </div>
</section>

<script src="Scripts/templates/blogPostTemplate.js"></script>
<script src="Scripts/templates/relatedPostsTemplate.js"></script>
<script>
    $('img[src*=blogspot]').addClass('img-responsive');

    //add pinterest button to images
    $('.post-content img:not([src*=images\\.rewardstyle],.post-thumbnail)').each(function (index) {
        var image = $(this);
        var imageSource = image.attr('src');

        var pinitLink = 'http://pinterest.com/pin/create/button/?url=' + window.location.href + '&media=' + imageSource + '&description=' + $('.post-header h3').text();
        var pinitButton = '<a href="' + pinitLink + '"><i class="fa fa-pinterest"></i></a>';

        image.wrap('<div style="position:relative"></div>');
        image.after('<div class="share-icons">' + pinitButton + '</div>');
    });

    //load comments
    var disqus_shortname = 'fancythingsblog';
    var disqus_title = Blogger.posts.title;
    var disqus_url = Blogger.posts.url;
    var disqus_homepage_url = 'http://thefancythings.com';

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
</script>