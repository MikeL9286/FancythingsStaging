<script>
    Blogger.GetPostById(window.location.href.match('post=(.*)')[1]);
    Blogger.GetRelatedPosts();
</script>

<section id="postContainer" class="container">
    <div class="row">
        <div class="post col-xs-12 col-sm-10 col-sm-offset-1 col-md-6 col-md-offset-1">
            <script id="blog-post-template" type="text/x-handlebars-template">
                {{#blogPosts}}
                <div class="post-header">
                    <h4>{{title}}</h4>
                    <em>{{formattedDate published}}</em>
                </div>
                <div class="post-content">
                    {{{content}}}
                </div>
                <div class="post-social">
                    <a href="{{twitterShareLink}}"><i class="fa fa-twitter"></i></a>
                    <a href="{{pinterestShareLink}}"><i class="fa fa-pinterest"></i></a>
                    <a href="{{{emailShareLink}}}"><i class="fa fa-envelope"></i></a>
                </div>
                <div class="post-footer">
                    <ul class="ft-sig">
                        <li class="divider"><hr /></li>
                        <li><img src="./img/monogram_gold.png" /></li>
                        <li class="divider"><hr /></li>
                    </ul>
                </div>
                <div class="post-comments">
                    <div id="disqus_thread"></div>
                    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
                </div>
                {{/blogPosts}}
            </script>
        </div>
        <div class="related-posts hidden-xs col-md-4 col-md-offset-1">
            <div class="widget">
                <h5>You might also like... <i class="fa fa-caret-down"></i></h5>
                <script id="related-posts-template" type="text/x-handlebars-template">
                    {{#relatedPosts}}
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <a href="blogpost.html?post={{{id}}}">
                                <img class="image rounded" src="{{{thumbnail content}}}" alt="post thumbnail">
                            </a>
                            <a href="blogpost.html?post={{{id}}}"><h5>{{title}}</h5></a>
                            <em>{{formattedDate published}}</em>
                        </div>
                    </div>
                    {{/relatedPosts}}
                </script>
            </div>
        </div>
    </div>
</section>

<script src="Scripts/templates/blogPostTemplate.js"></script>
<script src="Scripts/templates/relatedPostsTemplate.js"></script>
<script src="Scripts/blogpost.js"></script>

<script>
    //load disqus comments. doesnt work when in blogpost.js for some reason
    var disqus_shortname = 'fancythingsblog';
    var disqus_title = Blogger.posts.title;
    var disqus_url = Blogger.posts.url;
    var disqus_homepage_url = 'http://thefancythings.com';

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
</script>